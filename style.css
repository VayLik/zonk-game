body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #2c3e50; color: #ecf0f1; margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; display: flex; justify-content: center; align-items: flex-start; }
.main-wrapper { display: flex; flex-direction: row; gap: 25px; max-width: 1000px; width: 100%; align-items: flex-start; }

/* Гра */
.game-container { background-color: #34495e; padding: 30px; border-radius: 15px; flex: 2; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
h1, h2 { color: #f1c40f; margin-top: 0; }
.setup-panel { background-color: #2c3e50; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #3498db; }
.setup-panel input { padding: 5px; font-size: 16px; width: 80px; text-align: center; border-radius: 5px; border: none; margin-right: 10px; }
.scoreboard { display: flex; justify-content: space-around; margin-bottom: 20px; gap: 10px;}
.player-panel { padding: 10px; border: 3px solid transparent; border-radius: 10px; width: 45%; background-color: rgba(0,0,0,0.2); transition: all 0.3s;}
.player-panel.active { border-color: #f1c40f; background-color: rgba(241, 196, 15, 0.1); transform: scale(1.05);}

/* Контейнер для 3D кубиків */
.dice-container-wrapper { min-height: 120px; display: flex; align-items: center; justify-content: center; margin: 20px 0; }
.dice-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; perspective: 1000px; }

/* Правила */
.rules-container { flex: 1; background-color: #22313f; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto; border: 2px solid #34495e; }
.lang-switch { display: flex; gap: 10px; margin-bottom: 20px; }
.lang-switch button { flex: 1; padding: 8px; border: 2px solid #3498db; background: transparent; color: #ecf0f1; cursor: pointer; border-radius: 5px; font-weight: bold; transition: all 0.2s; }
.lang-switch button.active { background-color: #3498db; color: white; }
.hidden { display: none !important; }
.rules-content h2 { margin-top: 0; border-bottom: 2px solid #f1c40f; padding-bottom: 10px; }
.rules-content ul { padding-left: 20px; text-align: left; }
.rules-content li { margin-bottom: 8px; }
.rules-content h3 { color: #e67e22; margin-top: 25px; }

/* Блоки прикладів у правилах */
.combo-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; text-align: left; background: rgba(0,0,0,0.2); padding: 12px; border-radius: 8px; }
.combo-item span { flex: 1; padding-right: 15px; line-height: 1.4; }
.example-dice, .example-dice-small { display: flex; gap: 5px; align-items: center; }

/* === 2D ПЛОСКІ КУБИКИ (Тільки для правил) === */
.flat-die {
    background-color: #ecf0f1; border: 2px solid #bdc3c7; border-radius: 8px; display: grid; 
    grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); box-sizing: border-box; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}
.flat-die .dot { background-color: #2c3e50; border-radius: 50%; justify-self: center; align-self: center; }
.example-dice .flat-die { width: 35px; height: 35px; padding: 3px; border-radius: 6px; }
.example-dice .dot { width: 7px; height: 7px; }
.example-dice-small .flat-die { width: 22px; height: 22px; padding: 2px; border-radius: 4px; border-width: 1px; }
.example-dice-small .dot { width: 4px; height: 4px; }

/* Позиції крапок на 2D кубиках */
.flat-die[data-face="1"] .dot:nth-child(1) { grid-column: 2; grid-row: 2; }
.flat-die[data-face="2"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .flat-die[data-face="2"] .dot:nth-child(2) { grid-column: 3; grid-row: 3; }
.flat-die[data-face="3"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .flat-die[data-face="3"] .dot:nth-child(2) { grid-column: 2; grid-row: 2; } .flat-die[data-face="3"] .dot:nth-child(3) { grid-column: 3; grid-row: 3; }
.flat-die[data-face="4"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .flat-die[data-face="4"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .flat-die[data-face="4"] .dot:nth-child(3) { grid-column: 1; grid-row: 3; } .flat-die[data-face="4"] .dot:nth-child(4) { grid-column: 3; grid-row: 3; }
.flat-die[data-face="5"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .flat-die[data-face="5"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .flat-die[data-face="5"] .dot:nth-child(3) { grid-column: 2; grid-row: 2; } .flat-die[data-face="5"] .dot:nth-child(4) { grid-column: 1; grid-row: 3; } .flat-die[data-face="5"] .dot:nth-child(5) { grid-column: 3; grid-row: 3; }
.flat-die[data-face="6"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .flat-die[data-face="6"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .flat-die[data-face="6"] .dot:nth-child(3) { grid-column: 1; grid-row: 2; } .flat-die[data-face="6"] .dot:nth-child(4) { grid-column: 3; grid-row: 2; } .flat-die[data-face="6"] .dot:nth-child(5) { grid-column: 1; grid-row: 3; } .flat-die[data-face="6"] .dot:nth-child(6) { grid-column: 3; grid-row: 3; }

/* === 3D КУБИКИ (Для основної гри) === */
.cube-wrapper { width: 60px; height: 60px; perspective: 800px; cursor: pointer; transition: transform 0.2s ease-out; }
.cube-wrapper.selected { transform: translateY(-15px); }
.cube-wrapper.selected .side { background-color: #f1c40f; border: 2px solid #e67e22; box-shadow: inset 0 0 15px rgba(230, 126, 34, 0.5); }
.cube { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; }
.side { position: absolute; width: 60px; height: 60px; background-color: #ecf0f1; border: 2px solid #bdc3c7; border-radius: 8px; box-shadow: inset 0 0 10px rgba(0,0,0,0.1); display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); padding: 6px; box-sizing: border-box; backface-visibility: hidden; }

/* Грані 3D куба */
.side-1 { transform: rotateY(0deg) translateZ(30px); }
.side-2 { transform: rotateX(90deg) translateZ(30px); }
.side-3 { transform: rotateY(90deg) translateZ(30px); }
.side-4 { transform: rotateY(-90deg) translateZ(30px); }
.side-5 { transform: rotateX(-90deg) translateZ(30px); }
.side-6 { transform: rotateY(180deg) translateZ(30px); }

/* Крапки на 3D гранях */
.side .dot { width: 12px; height: 12px; background-color: #2c3e50; border-radius: 50%; box-shadow: inset 0 2px 4px rgba(0,0,0,0.5); justify-self: center; align-self: center; }

.side[data-face="1"] .dot:nth-child(1) { grid-column: 2; grid-row: 2; }
.side[data-face="2"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .side[data-face="2"] .dot:nth-child(2) { grid-column: 3; grid-row: 3; }
.side[data-face="3"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .side[data-face="3"] .dot:nth-child(2) { grid-column: 2; grid-row: 2; } .side[data-face="3"] .dot:nth-child(3) { grid-column: 3; grid-row: 3; }
.side[data-face="4"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .side[data-face="4"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .side[data-face="4"] .dot:nth-child(3) { grid-column: 1; grid-row: 3; } .side[data-face="4"] .dot:nth-child(4) { grid-column: 3; grid-row: 3; }
.side[data-face="5"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .side[data-face="5"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .side[data-face="5"] .dot:nth-child(3) { grid-column: 2; grid-row: 2; } .side[data-face="5"] .dot:nth-child(4) { grid-column: 1; grid-row: 3; } .side[data-face="5"] .dot:nth-child(5) { grid-column: 3; grid-row: 3; }
.side[data-face="6"] .dot:nth-child(1) { grid-column: 1; grid-row: 1; } .side[data-face="6"] .dot:nth-child(2) { grid-column: 3; grid-row: 1; } .side[data-face="6"] .dot:nth-child(3) { grid-column: 1; grid-row: 2; } .side[data-face="6"] .dot:nth-child(4) { grid-column: 3; grid-row: 2; } .side[data-face="6"] .dot:nth-child(5) { grid-column: 1; grid-row: 3; } .side[data-face="6"] .dot:nth-child(6) { grid-column: 3; grid-row: 3; }

/* Інтерфейс */
.controls button { padding: 12px 24px; font-size: 18px; margin: 5px; cursor: pointer; background-color: #3498db; color: white; border: none; border-radius: 8px; font-weight: bold; box-shadow: 0 4px 0 #2980b9; transition: transform 0.1s, box-shadow 0.1s; }
.controls button:active:not(:disabled) { transform: translateY(4px); box-shadow: 0 0 0 #2980b9; }
.controls button:disabled { background-color: #95a5a6; color: #bdc3c7; cursor: not-allowed; box-shadow: none; transform: translateY(4px); }
#message-log { margin-top: 25px; padding: 15px; background-color: #22313f; border-radius: 8px; font-weight: bold; min-height: 20px; border-left: 5px solid #f1c40f; text-align: left;}

@media (max-width: 850px) { .main-wrapper { flex-direction: column; align-items: center; } .game-container, .rules-container { width: 100%; max-width: 600px; } .rules-container { max-height: none; } }

/* --- СТИЛІ ДЛЯ ЕКРАНІВ ТА МОДАЛОК --- */
.screen-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(44, 62, 80, 0.95);
    display: flex; justify-content: center; align-items: center; z-index: 100;
}
.screen-container.hidden { display: none !important; }
.main-wrapper.hidden { display: none !important; }

.modal-box {
    background-color: #22313f; padding: 40px; border-radius: 15px;
    text-align: center; border: 3px solid #3498db; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    width: 90%; max-width: 400px;
}
.modal-box input {
    width: 80%; padding: 12px; margin: 20px 0; font-size: 18px; text-align: center;
    border-radius: 8px; border: 2px solid #bdc3c7; background-color: #ecf0f1;
}
.action-btn {
    padding: 12px 24px; font-size: 18px; cursor: pointer; background-color: #3498db;
    color: white; border: none; border-radius: 8px; font-weight: bold; transition: all 0.2s; box-shadow: 0 4px 0 rgba(0,0,0,0.2);
}
.action-btn:hover { filter: brightness(1.1); transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.2); }

/* Кнопка рематчу в логах */
.btn-rematch {
    margin-top: 15px; padding: 10px 20px; background-color: #e67e22; border: none;
    border-radius: 8px; color: white; font-weight: bold; font-size: 16px; cursor: pointer;
    box-shadow: 0 4px 0 #d35400; transition: transform 0.1s;
}
.btn-rematch:active { transform: translateY(4px); box-shadow: 0 0 0 #d35400; }